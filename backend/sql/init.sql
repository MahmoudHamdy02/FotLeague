CREATE TABLE IF NOT EXISTS users(
    id INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    email TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    name TEXT UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS leagues(
    id INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    name TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS match_status(
    id INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    match_status TEXT NOT NULL
);


CREATE TABLE IF NOT EXISTS matches(
    id INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    home TEXT NOT NULL,
    away TEXT NOT NULL,
    match_status INT NOT NULL REFERENCES match_status(id),
    home_score INT NULL,
    away_score INT NULL,
    season INT NOT NULL
);

CREATE TABLE IF NOT EXISTS predictions(
    id INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    user_id INT NOT NULL REFERENCES users(id),
    match_id INT NOT NULL REFERENCES matches(id),
    home INT NOT NULL,
    away INT NOT NULL
);

CREATE TABLE IF NOT EXISTS leagues_users(
    id INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    user_id INT NOT NULL REFERENCES users(id),
    league_id INT NOT NULL REFERENCES leagues(id)
);

CREATE TABLE IF NOT EXISTS scores(
    id INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    user_id INT NOT NULL REFERENCES users(id),
    league_id INT NOT NULL REFERENCES leagues(id),
    game_week INT NOT NULL
);
